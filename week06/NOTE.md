# 每周总结可以写在这里

有限状态机

  .每一个状态都是一个机器
    .在每一个机器里，我们可以做计算、存储、输出
    .所有的机器接受的输入是一致的
    .状态机的每一个机器本身没有状态，如果用函数来表示，应该是纯函数（没有副作用）

  .每一个状态机知道下一个状态
    .每一个机器都有确定的下一个状态（More）
    .每一个机器根据输入确定下一个状态（Mealy）

js中的有限状态机
  // 每一个函数是一个状态
  function state(input) // 函数参数就是输入
  {
    // 在函数中，可以自由地编写代码，处理每个状态的逻辑
    return next;// 返回值作为下一个状态
  }


html解析流程
  .拆分文件
    .为了方便文件管理，我们把parser单独拆分到文件中
    .parser接受HTML文本作为参数，返回一棵dom树

  .第二步
    .用FSM来实现HTML的分析
    .在HTML标准中，已经规定了HTML的状态
    .Toy-Browser只挑选其中一部分状态，来完成一个简单版本

  .解析标签
    .主要的标签有：开始标签，结束标签和自封闭标签
    .在这一步我们暂时忽略属性

  .创建元素
    .在状态机中，除了状态迁移，我们还会要加入业务逻辑
    .我们在标签结束状态提交标签token

  .处理属性
    .属性值分为单引号、双引号、无引号三种写法，因此需要多种状态处理
    .处理属性的方式跟标签类似
    .属性结束时，我们把属性加到标签token上

  .合成dom树
    .从标签构建dom树的基本技巧是使用栈
    .遇到开始标签是创建元素并入栈，遇到结束标签时出栈
    .自封闭节点可视为入栈后立刻出栈
    .任何元素的父元素是它入栈前的栈顶

  .处理文本节点
    .文本节点的处理与自封闭标签处理类似
    .多个文本节点需要合并
